
SELECT * from  (SELECT tmp.*,1 AS isSelected FROM course tmp  WHERE id IN (SELECT s.id FROM(SELECT c.id,u.COURSE_ID FROM COURSE c LEFT JOIN USER_COURSE u ON u.COURSE_ID = c.ID  UNION SELECT c.id,t.COURSE_ID FROM COURSE c LEFT JOIN COURSE_CART t ON t.COURSE_ID = c.ID  ) s GROUP BY s.id HAVING count( s.id ) > 1 )  UNION SELECT tmp.*,2 AS isSelected FROM course tmp  WHERE id NOT IN (SELECT s.id FROM(SELECT c.id,u.COURSE_ID FROM COURSE c LEFT JOIN USER_COURSE u ON u.COURSE_ID = c.ID  UNION SELECT c.id,t.COURSE_ID FROM COURSE c LEFT JOIN COURSE_CART t ON t.COURSE_ID = c.ID  ) s GROUP BY s.id HAVING count( s.id ) > 1 )  )  WHERE COURSE_NAME  LIKE  '%sssssssssssss%' 
